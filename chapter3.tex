\setcounter{chapter}{2}
\chapter{More on Games}
%section 1-------------------------------------------------------------------------------------
\section{Second-Order Logic}
\begin{enumerate}[1.]
%
\item \header{Hint to Exercise 3.1.2} Argue as in 2.2.2, 2.2.4, and 2.2.6-8.
%
\end{enumerate}
%end of section 1-----------------------------------------------------------------------------


%section 2------------------------------------------------------------------------------------
\section{Infinitary Logic: The Logics $\inflog{\infty}$ and $\inflog{\omega_1}$}
\begin{enumerate}[1.]
%
\item \header{Subformulas of $\inflog{\infty}$-Sentences Only Have Finitely Many Free Variables} In fact, one can show by induction on the formation of formulas that if $\varphi \in \inflog{\infty}$ has infinitely many free variables, then any $\inflog{\infty}$-formula having $\varphi$ as a subformula must also have infinitely many free variables.
%
\item \header{Note on 3.2.3} One can easily see that $\varphi(\vect{x})$ is equivalent to a countable conjunction of first-order formulas:
\[
\bland \setm{\cardexactly{n} \lthen \blor\setm{\hint{\card{A} + 1}{\strct{A}, \vect{a}}(\vect{x})}{\card{A} = n, \vect{a} \in A, \strct{A} \satis \varphi[\vect{a}]}}{n \geq 1}.
\]
The above disjunction is finite.
%
\item \header{Note on the Proof of 3.2.7} In the direction from \refitem{(iii)} to \refitem{(iv)}, the length $s$ of tuples in \refitem{($\ast$)} is better to be replaced by say $r$, since $s$ is fixed for the length of $\vect{a}$ and $\vect{b}$ whereas the tuples in \refitem{($\ast$)} may have different lengths.
\medskip\\
There is a typo in the direction from \refitem{(iv)} to \refitem{(iii)}: ``$a \in I$'' should change to ``$a \in A$''.
%
\item \header{Note on \refitem{(iii)} of 3.2.8} To transition from \refitem{(iii)} of 3.2.7 for $s = 0$, one refers to 2.3.2 (also cf.\ the transition from 2.3.3 to 2.3.4 using 2.3.2).
%
\item \header{Note on 3.2.11}
\begin{enumerate}[(a)]
%%
\item For $r \geq 0$, the set $\Delta_{r + 1}$ is finite.
%%
\item In case $r = 1$ an extension axiom has the form
\[
\forall v_1 \exists v_2 (v_1 \neq v_2 \land \bland_{\varphi \in \Phi} \varphi \land \bland_{\varphi \in \cmpl{\Phi}} \neg\varphi).
\]
%%
\item The condition ``$\hint{0}{\strct{A}, \vect{a}} = \hint{0}{\strct{B}, \vect{b}}$'' in the definition of the set $I$ of maps is equivalent to ``$\vect{a} \mapsto \vect{b} \in \partisoms(\strct{A}, \strct{B})$'', by 2.2.5 and parts (b) and (c) of 2.2.7.
%%
\item Here we may assume $\tr, \fls$ are included as \emph{atomic sentences} in the language (cf.\ part B in chapter 1) so that $\hint{0}{\strct{A}, \emptyseq}, \hint{0}{\strct{B}, \emptyseq}$ are defined; in fact, both formulas are equal to $\tr \land \neg\fls$.
%%
\end{enumerate}
%
\item \header{Hint to Exercise 3.2.13} Note that $x_1$ is the first element of the tuple $\vect{x}$ and therefore the sentence $\forall \vect{x} (\existexactly{1}x F\vect{x}x \land F\vect{x}x_1)$ formalizes the idea that $F$ is a (total) function that projects a tuple of parameter(s) onto its first parameter.
%
\item \header{Solution to Exercise 3.2.14} Without loss of generality let us assume that $A$ is finite and that $\card{A} = \min\sete{\card{A}, \card{B}}$. We also assume, for simplicity, that partial isomorphisms from $\strct{A}$ to $\strct{B}$ take the form $\vect{a} \mapsto \vect{b}$ (having finite domains and ranges) in which $\vect{a}$ and $\vect{b}$ consist of distinct elements.
\medskip\\
Now we distinguish three cases:
\begin{enumerate}[(1)]
%%
\item $\strct{A} \isom \strct{B}$.
%%
\item For any $m \in \nat$, $\vect{a} \in A$ and $\vect{b} \in B$, not $(\strct{A}, \vect{a}) \isom_m (\strct{B}, \vect{b})$.
%%
\item Not $\strct{A} \isom \strct{B}$, and there are $m \in \nat$, $\vect{a} \in A$ and $\vect{b} \in B$ such that $(\strct{A}, \vect{a}) \isom_m (\strct{B}, \vect{b})$.
%%
\end{enumerate}
In case (1), we have that $\winpos{\infty}(\strct{A}, \strct{B}) = \winpos{0}(\strct{A}, \strct{B}) = \partisoms(\strct{A}, \strct{B}) \neq \emptyset$, which contains all isomorphisms from $\strct{A}$ to $\strct{B}$. Thus, set $m_0 \defas 0$.
\medskip\\
In case (2), it follows in particular that for any $\vect{a} \in A$ and $\vect{b} \in B$, not $(\strct{A}, \vect{a}) \isom_0 (\strct{B}, \vect{b})$. Hence $\winpos{\infty}(\strct{A}, \strct{B}) = \winpos{0}(\strct{A}, \strct{B}) = \partisoms(\strct{A}, \strct{B}) = \emptyset$. Thus, set $m_0 \defas 0$.
\medskip\\
In case (3), we may assume, with no loss of generality, that $m \leq \card{A}$ and for any $\vect{a'} \in A$ and $\vect{b'} \in B$, not $(\strct{A}, \vect{a'}) \isom_{m + 1} (\strct{B}, \vect{b'})$. So we have
\[
\winpos{0}(\strct{A}, \strct{B}) \neq \emptyset, \etc, \winpos{m}(\strct{A}, \strct{B}) \neq \emptyset
\]
(cf.\ 2.2.4(c)) but
\[
\winpos{\infty}(\strct{A}, \strct{B}) = \winpos{m + 1}(\strct{A}, \strct{B}) = \emptyset.
\]
It then suffices to show that for $j < m$, 
\[
\winpos{j}(\strct{A}, \strct{B}) \neq \winpos{j + 1}(\strct{A}, \strct{B}).
\]
In fact, in any $\winpos{j + 1}(\strct{A}, \strct{B})$ there must be a maximal -- in the sense of set inclusion -- partial isomorphism $q$ (i.e.\ there is $q \in \winpos{j + 1}(\strct{A}, \strct{B})$ such that there is no $q' \in \winpos{j + 1}(\strct{A}, \strct{B})$ with $q' \supset q$) for which there is an $a \in A$ with $a \notin \dm(q)$, since $A$ is finite and $\strct{A}$ and $\strct{B}$ are not isomorphic (also cf.\ the proof of 2.2.3(b)). By 2.2.4(b) there is a $p \in \winpos{j}(\strct{A}, \strct{B})$ with $\dm(p) = \dm(q) \union \sete{a}$; note that $p \notin \winpos{j + 1}(\strct{A}, \strct{B})$ because $p \supset q$ and $q$ is maximal in $\winpos{j + 1}(\strct{A}, \strct{B})$. Thus, set $m_0 \defas m + 1$.
\begin{remark}
By definition (cf.\ 3.2.4) and 2.2.4(c), we immediately have
\[
\winpos{0}(\strct{A}, \strct{B}) \supseteq \etc \supseteq \winpos{m}(\strct{A}, \strct{B}) \supseteq \etc \supseteq \winpos{\infty}(\strct{A}, \strct{B}).
\]
\end{remark}
%
\end{enumerate}
%end of section 2-----------------------------------------------------------------------------


%section 3------------------------------------------------------------------------------------
\section{The Logics $\folog[s]$ and $\inflog[s]{\infty}$}
\begin{enumerate}[1.]
%
\item \header{Note on Pebble Games $\game[s]{m}(\strct{A}, \vect{a}, \strct{B}, \vect{b})$} They are different from the usual Ehrenfeucht-Fra\"iss\'e games $\game{m}(\strct{A}, \vect{a}, \strct{B}, \vect{b})$ in that the number of pebbles are fixed ($s$ for each of $\strct{A}$ and $\strct{B}$ here) and the pebbles are on or off (denoted by $\ast$) the board; once a pebble is placed onto the board, it is never removed off of it. Thus, pebble games consist of putting the pebbles onto the board (extensions) and moving them around on the board (moves).
%
\item \header{Note on \thesection.6}
\begin{enumerate}[(a)]
%%
\item To be clear, the last statement should be ``for arbitrary \emph{$\emptyvoc$-structures} $\strct{A}$ and $\strct{B}$, the duplicator wins $\game[s]{\infty}(\strct{A}, \strct{B})$ iff he wins $\game[s]{s}(\strct{A}, \strct{B})$.'' This is not true for arbitrary $\tau$, however, as can be seen in the example given in the next part.
%%
\item The spoiler wins $\game[3]{\infty}(\strct{G}_l, \strct{G}_l \dunion \strct{G}_l)$ but does not win $\game[3]{3}(\strct{G}_l, \strct{G}_l \dunion \strct{G}_l)$. As remarked in 2.3.16, the information that exactly one of the structures $\strct{G}_l$ and $\strct{G}_l \dunion \strct{G}_l$ satisfy the $\inflog[3]{\infty}$-sentence expressing connectivity can be transformed into a winning strategy for the spoiler.
%%
\end{enumerate}

%
\item \header{Hint to Exercise \thesection.7}
\begin{enumerate}[(a)]
%%
\item For the `if' direction, assume that $A = \sete{a_0, \etc, a_k}$, where
\[
a_0 \mathrel{\intpr{<}{A}} \etc \mathrel{\intpr{<}{A}} a_k.
\]
Then take the conjunction of the following $\folog[2]$-sentences that together describe $\strct{A}$ up to isomorphism (where $\psi'_n$ is as in Examples \thesection.1).
\begin{itemize}
%%%
\item The size of $A$ ($\card{A} = k + 1$):
\[
\exists x \psi'_{k - 1} \land \forall x \neg\psi'_k.
\]
%%%
\item The interpretation of $c \in \tau$ in $\strct{A}$ ($\intpr{c}{\strct{A}} = a_i$):
\[
\exists x (x = c \land \psi'_i).
\]
%%%
\item The elements of the interpretation $\intpr{P}{\strct{A}}$ of unary $P \in \tau$ in $\strct{A}$:
\[
\forall x (Px \liff \blor \setm{\psi'_i}{a_i \in \intpr{P}{\strct{A}}}).
\]
%%%
\item The elements of the interpretation $\intpr{R}{\strct{A}}$ of binary $R \in \tau$ in $\strct{A}$:
\[
\forall x \forall y (Rxy \liff \blor \setm{\psi'_i \land \psi'_j\begin{perm}{c} yx \cr xy \end{perm}}{(a_i, a_j) \in \intpr{R}{\strct{A}}}).
\]
%%%
\end{itemize}
%%
\item For the `if' direction, note that the partial isomorphisms of size $s$ from $\strct{A}$ to $\strct{B}$ resulted from all possible rounds of the game $\game[s]{m}(\strct{A}, \strct{B})$ with the additional condition after $s$ moves provide a winning strategy for the duplicator in the same game without that condition.
%%
\item Suppose that $\tau$ is relational and all its relation symbols have arity $\leq s$, where $s \geq 1$ by definition (cf.\ paragraph A in chapter 1). Moreover, suppose that $\card{A} = \card{B} \leq s + 1$ and that the duplicator wins $\game[s]{\infty}(\strct{A}, \strct{B})$. Our goal then is to show that $\strct{A} \isom \strct{B}$. We further assume $\tau \neq \emptyvoc$, since otherwise it is trivial that the duplicator wins $\game[s]{\infty}(\strct{A}, \strct{B})$ and $\strct{A} \isom \strct{B}$.
\medskip\\
First observe the assumption that the duplicator wins $\game[s]{\infty}(\strct{A}, \strct{B})$ immediately implies that he wins $\game[s]{m}(\strct{A}, \strct{B})$ for $m \geq 1$. By Theorem \thesection.5, then, we have for every $m \geq 1$, $\strct{A} \equv[s]_m \strct{B}$. Therefore, it suffices to find a sentence $\varphi_\strct{A} \in \folog[s]\of{\tau}$ that characterizes $\strct{A}$ up to isomorphism given the fixed cardinality $\card{A}$, i.e.
\begin{center}
for every structure $\strct{A}'$ with $\card{A'} = \card{A}$, \ $\strct{A}' \satis \varphi_\strct{A}$ \ iff \ $\strct{A}' \isom \strct{A}$.
\end{center}
Then we are done: The first-order sentence $\varphi_\strct{A}$ has a (finite) quantifier rank, say $m$, and it follows that $\strct{A} \isom \strct{B}$ because $\strct{B} \satis \varphi_\strct{A}$ (implied by $\strct{A} \equv[s]_m \strct{B}$ above).
\medskip\\
Next, the sentence $\varphi_\strct{A}$ depends on whether $\card{A} \leq s$ or $\card{A} = s + 1$. Recall the set of atomic formulas
\[
\Theta_n \defas \sett{\psi}{\mathmode{\psi} has the form \mathmode{Rx_1 \etc x_k}, \mathmode{x = y} and variables among \mathmode{v_1, \etc, v_n}}
\]
used in the proof of 2.1.1. (There are no formulas of the form $c = x$ in $\Theta_n$ as $\tau$ is assumed to be relational.)
\medskip\\
The case $\card{A} \leq s$ is simple: If $\card{A} = n$, i.e.\ $A = \sete{a_1, \etc, a_n}$ then we choose
\[
\varphi_\strct{A} \defas \exists v_1 \etc \exists v_n (\bland\setm{\psi}{\psi \in \Theta_n, \strct{A} \satis \psi[\vect{a}]} \land \bland\setm{\neg\psi}{\psi \in \Theta_n, \strct{A} \satis \neg\psi[\vect{a}]})
\]
where $\vect{a}$ denotes $a_1 \etc a_n$.
\medskip\\
It remains to deal with the case $\card{A} = s + 1$, i.e.\ $A = \sete{a_1, \etc, a_{s + 1}}$. Remember that we only have $s$ distinct variables $v_1, \etc, v_s$ to describe $\strct{A}$. The idea is that, using these $s$ (quantified) variables, we describe the relations and (in)equalities
\begin{enumerate}[(1)]
%%
\item among $a_1, \etc, a_s$ first, where $v_1, \etc, v_s$ are intended to represent $a_1, \etc, a_s$ respectively, and then
%%
\item among $a_1, \etc, a_{i - 1}, a_{i + 1}, \etc, a_{s + 1}$ for each $1 \leq i \leq s$, where $v_1, \etc, v_{i - 1}, v_i, v_{i + 1}, \etc, v_s$ are intended to represent $a_1, \etc, a_{i - 1}, a_{s + 1}, a_{i + 1}, \etc, a_s$ ($a_{s + 1}$ is between $a_{i - 1}$ and $a_{i + 1}$ in this order), respectively.
%%
\end{enumerate}
Note that this is feasible as every relation symbol has arity at most $s$.
\medskip\\
For brevity, let us denote $a_1, \etc, a_{i - 1}, a_{s + 1}, a_{i + 1}, \etc, a_s$ ($a_{s + 1}$ is between $a_{i - 1}$ and $a_{i + 1}$ in this order) by $\vect{a}_i$ for $1 \leq i \leq s$; moreover, we also let $\vect{a}_0$ denote $a_1, \etc, a_s$. The desired sentence is thus
\[
\varphi_\strct{A} \defas \exists v_1 \etc \exists v_s \bland^s_{i = 0} \varphi_i,
\]
where
\[
\varphi_0 \defas \bland \setm{\psi}{\psi \in \Theta_s, \strct{A} \satis \psi[\vect{a}_0]} \land \bland \setm{\neg\psi}{\psi \in \Theta_s, \strct{A} \satis \neg\psi[\vect{a}_0]}
\]
and for $1 \leq i \leq s$,
\[
\varphi_i \defas
\begin{cases}
\forall v_i (\bland_{1 \leq j \leq s, j \neq i} \neg v_i = v_j \lthen \varphi_0) & \text{if \mathmode{\strct{A} \satis \varphi_0[\vect{a}_i]}}\cr
\exists v_i (\bland \setm{\psi}{\psi \in \Theta_s, \strct{A} \satis \psi[\vect{a}_i]} \land \bland \setm{\neg\psi}{\psi \in \Theta_s, \strct{A} \satis \neg\psi[\vect{a}_i]}) & \text{otherwise}.\cr
\end{cases}
\]
%%
\end{enumerate}
%
\end{enumerate}
%end of section 3-----------------------------------------------------------------------------