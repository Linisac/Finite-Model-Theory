\setcounter{chapter}{3}
\chapter{0-1 Laws}
Almost everywhere in this chapter the vocabulary $\tau$ is assumed to be nonempty and relational. In case $\tau = \emptyset$ (and hence obviously $\tau$ is relational), the results derived in section 4.1 are valid, and so are those in 4.2 and 4.3 but then are obvious because the only parametric class is the class $\modclass(\emptyset)$ of merely finite sets.
%section 1------------------------------------------------------------------------------------
\setcounter{section}{0}
\section{0-1 Laws for $\folog$ and $\inflog[\omega]$}
\begin{enumerate}[1.]
%
\item \header{Note on the Proof of Lemma 4.1.2} Denote
\[
\psi \defas \blor_{\varphi \in \Phi} \neg\varphi \lor \blor_{\varphi \in \cmpl{\Phi}} \varphi
\]
and let $\strct{A}$ with domain $A = \sete{1, \etc, n}$ be a random structure. Then
\[
\begin{array}{ll}
\    & \lprob[n](\neg\extaxm[\Phi]) \cr
=    & \paren{\mbox{the probability that \mathmode{\strct{A} \satis \neg\extaxm[\Phi]}}} \cr
=    & \paren{\parbox{40em}{the probability that there is an injective \mathmode{f : \sete{1, \etc, r} \to A} such that for every \mathmode{a \in A \setminus \rg(f)}, \mathmode{\strct{A} \satis \psi[f(1), \etc, f(r), a]}}} \cr
\leq & \sum\limits_{\text{injective \mathmode{f : \sete{1, \etc, r} \to A}}} \paren{\mbox{the probability that for every \mathmode{a \in A \setminus \rg(f)}, \mathmode{\strct{A} \satis \psi[f(1), \etc, f(r), a]}}} \cr
=    & \prmt{n}{r} \mul \paren{\mbox{the probability that for every \mathmode{a \in A \setminus \rg(f)} given injective \mathmode{f}, \mathmode{\strct{A} \satis \psi[f(1), \etc, f(r), a]}}} \cr
=    & \prmt{n}{r} \mul \paren{\parbox{35em}{the probability that for every \mathmode{a \in A \setminus \rg(f)} given injective \mathmode{f}, the assignment \mathmode{f(1), \etc, f(r), a} does not satisfy in \mathmode{\strct{A}} the type characterized by \mathmode{\Phi}}} \cr
=    & \prmt{n}{r} \mul \prod\limits_{\text{\mathmode{a \in A \setminus \rg(f)} given injective \mathmode{f}}} \paren{\parbox{25em}{the probability that the assignment \mathmode{f(1), \etc, f(r), a} does not satisfy in \mathmode{\strct{A}} the type characterized by \mathmode{\Phi}}} \cr
=    & \prmt{n}{r} \mul (\frac{c - 1}{c})^{n - r} \cr
\leq & n^r \mul (\frac{c - 1}{c})^{n - r}. \cr
\end{array}
\]

\begin{note}
The proof yields that for sufficiently large $n$, every extension axiom $\extaxm$ has a model of cardinality $n$.
\end{note}
%
\item \header{Hint to Exercise 4.1.6} By 2.2.6, the set
\[
\Phi \defas \sett{\hint{m}{\strct{C}}}{\mathmode{\strct{C}} is a structure}
\]
is finite. Thus, for $s \geq 1$, the binary relation $\isom_m$ induces a finite partition of $\lclass{s}(\tau)$ due to the equivalence between \refitem{(iii)} and \refitem{(iv)} of 2.3.4. Also by 4.1.5 the 0-1 law of $\folog\of{\tau}$, there is exactly one sentence $\varphi_0 \in \Phi$ with $\lprob(\varphi_0) = 1$ because
\[
1 = \lprob(\bunion_{\varphi \in \Phi} \modclass(\varphi)) = \sum_{\varphi \in \Phi} \lprob(\varphi).
\]
Finally, observe that the probability $\strct{A} \isom_m \strct{B}$ is $\geq$ the probability that both $\strct{A} \satis \varphi_0$ and $\strct{B} \satis \varphi_0$.
%
\item \header{Solution to Exercise 4.1.7} Let $\varphi \defas \extaxm[\Phi]$ be an $(r + 1)$-extension axiom, where $\Phi$ is a subset of $\Delta_{r + 1}$ as defined in 3.2.11. Assume that $\card{\Delta_{r + 1}} = c$ and $\card{\Phi} = k$.

Let $\strct{A}$ with domain $A = \sete{1, \etc, n}$ be a random structure constructed with a biased coin so that $R i_1 \etc i_m$ holds with probability $p$ where $0 < p < 1$. Then
\[
\begin{array}{ll}
\    & \lprob[n](\neg\extaxm[\Phi]) \cr
=    & \paren{\mbox{the probability that \mathmode{\strct{A} \satis \neg\extaxm[\Phi]}}} \cr
=    & \paren{\parbox{40em}{the probability that there is an injective \mathmode{f : \sete{1, \etc, r} \to A} such that for every \mathmode{a \in A \setminus \rg(f)}, \mathmode{\strct{A} \satis \psi[f(1), \etc, f(r), a]}}} \cr
\leq & \sum\limits_{\text{injective \mathmode{f : \sete{1, \etc, r} \to A}}} \paren{\mbox{the probability that for every \mathmode{a \in A \setminus \rg(f)}, \mathmode{\strct{A} \satis \psi[f(1), \etc, f(r), a]}}} \cr
=    & \prmt{n}{r} \mul \paren{\mbox{the probability that for every \mathmode{a \in A \setminus \rg(f)} given injective \mathmode{f}, \mathmode{\strct{A} \satis \psi[f(1), \etc, f(r), a]}}} \cr
=    & \prmt{n}{r} \mul \paren{\parbox{35em}{the probability that for every \mathmode{a \in A \setminus \rg(f)} given injective \mathmode{f}, the assignment \mathmode{f(1), \etc, f(r), a} does not satisfy in \mathmode{\strct{A}} the type characterized by \mathmode{\Phi}}} \cr
=    & \prmt{n}{r} \mul \prod\limits_{\text{\mathmode{a \in A \setminus \rg(f)} given injective \mathmode{f}}} \paren{\parbox{25em}{the probability that the assignment \mathmode{f(1), \etc, f(r), a} does not satisfy in \mathmode{\strct{A}} the type characterized by \mathmode{\Phi}}} \cr
=    & \prmt{n}{r} \mul (1 - p^k(1 - p)^{c - k})^{n - r} \cr
\leq & n^r \mul (1 - p^k(1 - p)^{c - k})^{n - r}. \cr
\end{array}
\]
It follows that $\lprob(\neg\extaxm[\Phi]) = \lim_{n \to \infty} \lprob[n](\neg\extaxm[\Phi]) = 0$.
%
\item \header{Solution to Exercise 4.1.8} Let $\strct{R}'$ denote the random structure defined as in the description of the exercise. Note that $\strct{R}'$ is a \emph{random variable}. In the following for $n > 0$ and for any (finite or infinite) structure $\strct{A}$ we let $\strct{A}_n$ be the substructure of $\strct{A}$ induced by the domain $\sete{1, \etc, n}$, provided that the domain $A$ of $\strct{A}$ contains $\sete{1, \etc, n}$ as a subset.

Observe that there are finitely many $\tau$-structures with domain $\sete{1, \etc, n}$, i.e.\ the class $\lclass{n}(\tau)$ is finite. Since $\tau$ is relational, the structures $\strct{B} \in \lclass{n}(\tau)$ altogether induce an \emph{equal partition} of
\[
C \defas \sett{\strct{A}}{\mathmode{\strct{A}} is a \mathmode{\tau}-structure of domain \mathmode{A = \sete{1, 2, \etc}}}
\]
such that the equivalence classes
\[
\setm{\strct{A} \in C}{\strct{A}_n = \strct{B}}
\]
for the structures $\strct{B}$ have the same size. Thus, if $K$ is a class of (finite) $\tau$-structures, then
\begin{equation}\label{e4_1_8+1}
(\text{the probability that for the random structure \mathmode{\strct{R}'}, its substructure \mathmode{\strct{R}'_n} is in \mathmode{K}}) = \lprob[n](K). \tag{$+$}
\end{equation}

Now consider any $(r + 1)$-extension axiom $\chi$ so that $\neg\chi$ is logically equivalent to
\[
\exists v_1 \etc \exists v_r \rho,
\]
where
\[
\rho = (\bland_{1 \leq i < j \leq r} \neg v_i = v_j \land \forall v_{r + 1} (\bland_{1 \leq i \leq r} \neg v_{r + 1} = v_i \lthen (\blor_{\varphi \in \Phi} \neg\varphi \lor \blor_{\varphi \in \cmpl{\Phi}} \varphi)))
\]
and $\Phi \subseteq \Delta_{r + 1}$. For every $r$-tuple $\vect{i} = (i_1, \etc, i_r) \in \cartpwr{\posint}{r}$ of positive integers, let
\[
m(\vect{i}) \defas
\begin{cases}
\max(i_1, \etc, i_r) & \text{if \mathmode{r > 0}} \cr
1                    & \text{otherwise (i.e.\ \mathmode{\vect{i} = \emptyseq})} \cr
\end{cases}
\]
and further for every positive integer $j \in \posint$ let $E^{\vect{i}}_j$ be the event that $\strct{R}'_{m(\vect{i}) + j} \satis \rho[\vect{i}]$. Then we have
\[
E^{\vect{i}}_1 \supseteq E^{\vect{i}}_2 \supseteq \etc
\]
and hence
\begin{equation}\label{e4_1_8+2}
(\text{the probability for the event \mathmode{\bintsc^\infty_{j = 1} E^{\vect{i}}_j}}) = \lim_{j \to \infty} (\text{the probability for the event \mathmode{E^{\vect{i}}_j}}). \tag{$\ast$}
\end{equation}
Moreover, it is true that
\[
\begin{array}{lll}
\    & (\text{the probability for the event \mathmode{E^{\vect{i}}_j}}) & \cr
\leq & (\text{the probability for the event that \mathmode{\strct{R}'_{m(\vect{i}) + j} \satis \exists v_1 \etc \exists v_r \rho}}) & \cr
=    & (\text{the probability for the event that \mathmode{\strct{R}'_{m(\vect{i}) + j} \satis \neg\chi}}) & \cr
=    & \lprob[m(\vect{i}) + j](\neg\chi) & \text{(by (\ref{e4_1_8+1}))} \cr
\end{array} 
\]
and hence
\begin{equation}\label{e4_1_8+3}
\lim_{j \to \infty} (\text{the probability for the event \mathmode{E^{\vect{i}}_j}}) \leq \lim_{j \to \infty} \lprob[m(\vect{i}) + j](\neg\chi) = 0 \tag{$\ast\ast$}
\end{equation}
by (the proof of) Lemma 4.1.2.

Finally, for brevity, for every $\vect{i} \in \cartpwr{\posint}{r}$ let $F^{\vect{i}}$ be the event that $\strct{R}' \satis \rho[\vect{i}]$; then we have
\begin{equation}\label{e4_1_8+4}
F^{\vect{i}} = \bintsc^\infty_{j = 1} E^{\vect{i}}_j. \tag{$\ast\ast\ast$}
\end{equation}
It follows that
\[
\begin{array}{lll}
\    & (\text{the probability that \mathmode{\strct{R}' \satis \neg\chi}}) & \cr
=    & (\text{the probability for the event \mathmode{\bunion_{\vect{i} \in \cartpwr{\posint}{r}} F^{\vect{i}}}}) & \cr
\leq & \sum_{\vect{i} \in \cartpwr{\posint}{r}} (\text{the probability for the event \mathmode{F^{\vect{i}}}}) & \cr
=    & \sum_{\vect{i} \in \cartpwr{\posint}{r}} (\text{the probability for the event \mathmode{\bintsc^\infty_{j = 1} E^{\vect{i}}_j}}) & \text{(by (\ref{e4_1_8+4}))} \cr
=    & \sum_{\vect{i} \in \cartpwr{\posint}{r}} \lim_{j \to \infty} (\text{the probability for the event \mathmode{E^{\vect{i}}_j}}) & \text{(by (\ref{e4_1_8+2}))} \cr
\leq & \sum_{\vect{i} \in \cartpwr{\posint}{r}} 0 & \text{(by (\ref{e4_1_8+3}))} \cr
=    & 0.
\end{array}
\]

Therefore, we conclude that, with probability $1$, $\strct{R}'$ is a model of any extension axiom $\chi$ and hence of $\randstrtheory$.

\begin{note}
The \emph{values} of the random variable $\strct{R}'$ for which $\strct{R}'$ is a model of $\randstrtheory$ are exactly those $\tau$-structures that are isomorphic to the infinite random structure $\infrandstr$.
\end{note}
%
\item \header{Hint to Exercise 4.1.9} (INCOMPLETE)
%
\end{enumerate}
%end of section 1-----------------------------------------------------------------------------


%section 2------------------------------------------------------------------------------------
\setcounter{section}{1}
\section{Parametric Classes}
\begin{enumerate}[1.]
%
\item \header{Note on Definition 4.2.1 and the Arguments Leading to Theorem 4.2.3} A parametric sentence may be a conjunction of sentences that involve different numbers of variables, in which the boolean combinations may contain different relation symbols. For example,
\[
\forall x Rxx \land \forall \distinct x y (\neg Rxy \lor Tyxy)
\]
is a parametric sentence.

In the construction process leading to statement (1) before 4.2.3, the definition of parametric sentences gives us that whether or not an $s$-tuple $b_1, \etc, b_s$ is in a relation $\intpr{R}{B}$ is independent of other tuples (not necessarily having length $s$) due to the fact that every atomic subformula of $\varphi_0$ contains exactly the variables that appear in its corresponding quantification and that every conjunct of $\varphi_0$ is a universal formula. This explains why the process works for parametric classes and why it may not work for classes of transitive properties (hence those properties are excluded in the consideration of parametric classes).

To obtain (2), let $\strct{A}, \strct{B}$ be two models of $\randstrtheory(\varphi_0)$ and choose $I$ as in 3.2.11. Obviously $I \neq \emptyset$ as $\emptymap \mapsto \emptymap \in I$ since $\strct{A} \satis \tr \land \neg\fls$ and $\strct{B} \satis \tr \land \neg\fls$. For the forth property, let $\vect{a} \mapsto \vect{b} \in I$ and $\vect{a} = a_1, \etc, a_r$ and $\vect{b} = b_1, \etc, b_r$ each consist of distinct entries. Let $a_{r + 1} \in A$ be different from entries of $\vect{a}$ and consider $\Phi \subseteq \Delta_{r + 1}$ such that
\[
\strct{A} \satis (\bland_{\varphi \in \Phi} \varphi \land \bland_{\varphi \in \cmpl{\Phi}} \neg\varphi)\withassgn{\vect{a}a_{r + 1}}.
\]
It follows that $\strct{A} \satis \exists \distinct v_1 \etc v_rv_{r + 1} (\bland_{\varphi \in \Phi} \varphi \land \bland_{\varphi \in \cmpl{\Phi}} \neg\varphi)$ and hence $\extaxm[\Phi]$ is compatible with $\varphi_0$, which gives $\extaxm[\Phi] \in \randstrtheory(\varphi_0)$. As $\strct{B} \satis \randstrtheory(\varphi_0)$, there is a $b_{r + 1} \in B$ different from the entries of $\vect{b}$ such that
\[
\strct{B} \satis (\bland_{\varphi \in \Phi} \varphi \land \bland_{\varphi \in \cmpl{\Phi}} \neg\varphi)\withassgn{\vect{b}b_{r + 1}}.
\]
Therefore, $\vect{a}a_{r + 1} \mapsto \vect{b}b_{r + 1} \in I$. Similarly for the back property.

As for (3), a slight modification can be made to the construction procedure for the countable model of $\randstrtheory$ in 3.2.11 to obtain one for $\randstrtheory(\varphi_0)$: Let $\seq{\alpha_n}{n \geq 0}$ be as in 3.2.11 except that now we only consider extension axioms $\extaxm \in \randstrtheory(\varphi_0)$. We choose $\strct{A}_0$ with $A_0 = \sete{0}$ so that $\strct{A}_0 \satis \varphi_0$ according to (1). Suppose that $\strct{A}_n$ has been defined such that $\strct{A}_n \satis \varphi_0$. For $\alpha_n = (\vect{m}, \extaxm[\Phi])$ where $\vect{m} = m_1, \etc, m_r$ that are distinct elements not greater than $n$ (if $r = 0$ then $\vect{m} = \emptyseq$) and $\Phi \subseteq \Delta_{r + 1}$, we show how to construct a model $\strct{A}_{n + 1}$ of $\varphi_0$ so that $(\strct{A}_{n + 1}, m_1, \etc, m_r, n + 1) \satis \Phi$:
\begin{itemize}
%%
\item Let, as in 3.2.11,
\begin{center}
$\strct{A}_{n + 1} \satis \varphi \withassgn{m_1, \etc, m_r, n + 1}$ \ \ \ iff \ \ \ $\varphi \in \Phi$.
\end{center}
%%
\item In case $n > r$ and $k \geq 2$, for every $2 \leq s \leq k$ and for every $s$-tuple $\vect{m}'$ that contains $n + 1$ and an entry $\leq n$ not in $\vect{m}$, we apply the construction process for (1) to $\vect{m}'$.
%%
\end{itemize}
Note that the second step is independent of $\Phi$, and thus in order to verify $\strct{A}_{n + 1} \satis \varphi_0$, it remains to show that for every conjunct
\[
\forall \distinct v_1 \etc v_t \psi
\]
of $\varphi_0$ and every $t$-tuple $\vect{a} = a_1, \etc, a_t$ (not necessarily distinct) that contains $n + 1$ and has all its other entries (if any) from $\vect{m}$, we have $\strct{A}_{n + 1} \satis \psi \withassgn{\vect{a}}$. In fact, letting $\psi'$ be obtained from $\psi$ by changing $v_i$ ($1 \leq i \leq t$) to $v_j$ ($1 \leq j \leq r$) if $a_i = m_j$ and to $v_{r + 1}$ if $a_i = n + 1$, we have that $\psi'$ is a conjunction of some formulas in $\Delta_{r + 1}$ and
\begin{center}
$\strct{A}_{n + 1} \satis \psi \withassgn{\vect{a}}$ \ \ \ iff \ \ \ $\strct{A}_{n + 1} \satis \psi' \withassgn{\vect{m}, n + 1}$.
\end{center}
As $\extaxm[\Phi]$ is compatible with $\varphi_0$, there is a model $\strct{B}$ of
\[
\varphi_0 \land \exists \distinct v_1 \etc v_r v_{r + 1} (\bland_{\varphi \in \Phi} \varphi \land \bland_{\varphi \in \cmpl{\Phi}} \neg\varphi).
\]
Consider an $(r + 1)$-tuple $\vect{b} = b_1, \etc, b_{r + 1}$ of distinct elements such that
\[
\strct{B} \satis (\bland_{\varphi \in \Phi} \varphi \land \bland_{\varphi \in \cmpl{\Phi}} \neg\varphi) \withassgn{\vect{b}},
\]
then
\begin{center}
$\strct{A}_{n + 1} \satis \psi' \withassgn{\vect{m}, n + 1}$ \ \ \ iff \ \ \ $\strct{B} \satis \psi' \withassgn{\vect{b}}$
\end{center}
(recall $\psi'$ is a conjunction of some formulas in $\Delta_{r + 1}$). But it is true that $\strct{B} \satis \psi' \withassgn{\vect{b}}$ because $\strct{B}$ is a model of $\varphi_0$. We conclude that $\strct{A}_{n + 1} \satis \psi \withassgn{\vect{a}}$.

On the other hand, for every $r \geq 0$ the theory $\randstrtheory(\varphi_0)$ contains at least one $(r + 1)$-extension axiom: By (1) there is a model $\strct{A}$ of $\varphi_0$ of cardinality $r + 1$, say, having domain $A = \sete{a_1, \etc, a_{r + 1}}$. Let $\Phi \subseteq \Delta_{r + 1}$ such that
\[
\strct{A} \satis (\bland_{\varphi \in \Phi} \varphi \land \bland_{\varphi \in \cmpl{\Phi}} \neg\varphi) \withassgn{a_1, \etc, a_{r + 1}}.
\]
We then have $\strct{A} \satis \exists \distinct v_1 \etc v_{r + 1} (\bland_{\varphi \in \Phi} \varphi \land \bland_{\varphi \in \cmpl{\Phi}} \neg\varphi)$ and hence the $(r + 1)$-extension axiom $\extaxm[\Phi]$ is compatible with $\varphi_0$ and is in $\randstrtheory(\varphi_0)$.

The above argument also yields that for every $s \geq 1$ and every $r < s$, $\conjextaxm[\varphi_0]{s}$ contains at least one $(r + 1)$-extension axiom as a conjunct.

Statement (3) immediately implies that for $s \geq 1$, $\conjextaxm[\varphi_0]{s}$ is satisfiable by a model of $\varphi_0$, because $\randstrtheory(\varphi_0) \consq \conjextaxm[\varphi_0]{s}$.

As in 3.3.11, we can conclude that
\begin{itemize}
%%
\item Every model of $\conjextaxm[\varphi_0]{s}$ has at least $s$ elements (by induction on $s$, using the fact that $\conjextaxm[\varphi_0]{s + 1}$ is the conjunction of $\conjextaxm[\varphi_0]{s}$ and at least one $(s + 1)$-extension axiom).
%%
\item Every two models of $\conjextaxm[\varphi_0]{s}$ are $s$-partially isomorphic (argue as for (2) above and as in 3.3.11 simultaneously), from which we obtain (4).
%%
\end{itemize}

Finally, let $A$ be a set such that $\card{A} = n \geq r + 1$ and let $\Phi \subseteq \Delta_{r + 1}$ such that $\extaxm[\Phi]$ is compatible with $\varphi_0$, we show how to construct a model $\strct{A}$ of $\varphi_0$ with domain $A$ such that $(\strct{A}, a_1 \etc a_ra) \satis \Phi$ in which $a_1, \etc, a_r, a$ are all distinct.\footnote{I suspect that there is a typo in the parenthesized argument after (5).} The construction consists of two steps:
\begin{itemize}
%%
\item For every $0 \leq m \leq r$ and $(m + 1)$-tuple $\vect{a} = a_{i_1} \etc a_{i_m}a$ with $1 \leq i_1 < i_2 < \etc < i_m \leq r$ (if $m = 0$ then $\vect{a} = a$) and $\varphi(v_{i_1}, \etc, v_{i_m}, v_{r + 1}) = Ry_1 \etc y_n$ with $\sete{y_1, \etc, y_n} = \sete{v_{i_1}, \etc, v_{i_m}, v_{r + 1}}$, let
\begin{center}
$\strct{A} \satis \varphi \withassgn{\vect{a}}$ \ \ \ iff \ \ \ $\varphi \in \Phi$.
\end{center}
%%
\item For all other tuples $\vect{a}'$ (which may or may not contain $a$ and is not a permutation of those $\vect{a}$ considered above) and all $R \in \tau$ we use the construction procedure leading to (1) for the $\vect{a}$-part of $\intpr{R}{A}$.
%%
\end{itemize}
It is easy to show that $\strct{A} \satis \varphi_0$ using the same argumentation as for (3) and thus omitted. Also observe that the second step is independent of $\Phi$, so we can focus on $\Phi$ when proving (5) using the same method as for 4.1.2.
%
\end{enumerate}
%end of section 2-----------------------------------------------------------------------------


%section 3------------------------------------------------------------------------------------
\setcounter{section}{2}
\section{Unlabeled 0-1 Laws}
\begin{enumerate}[1.]
%
\item \header{Two Methods to Check Automorphisms} Let $\strct{A}$ be a $\tau$-structure with domain $A = \sete{a_1, \etc, a_n}$ that is represented as a collection of tables one for each relation and constant symbol so that
\begin{itemize}
%%
\item the table for a $k$-ary $R$ has an entry for every $k$-tuple $(a_{i_1}, \etc, a_{i_k})$, with a $\bullet$ in it if $(a_{i_1}, \etc, a_{i_k}) \in \intpr{R}{A}$ and a $\circ$ otherwise; and
%%
\item the table for a constant $c$ has an entry for every element $a_i$, with a $\bullet$ in it if $\intpr{c}{A} = a_i$ and a $\circ$ otherwise.
%%
\end{itemize}
Below are two methods to check whether a permutation $\pi$ over $A$ is an automorphism of $\strct{A}$. For simplicity, let $\pi$ be a permutation over the set of indices $\sete{1, \etc, n}$ of elements rather than over $A$ itself.
\begin{enumerate}[(1)]
%%
\item In all tables change every element $a_i$ to $a_{\pi(i)}$ and then rearrange all entries into the usual lexicographic order based on the ordering $a_1, \etc, a_n$. Check if the resulting collection of tables is identical to that for $\strct{A}$ entrywise.
%%
\item In all tables rearrange the entries into the lexicographic order based on the ordering $a_{\pi(1)}, \etc, a_{\pi(n)}$. Check if the resulting collection of tables is identical to that for $\strct{A}$ entrywise.
%%
\end{enumerate}
In fact, it is easy to verify the correctness of the two methods. In the first method, we can think of every element $a_i$ as having a more informative subscript $i \to \pi(i)$ (it is intended to mean moving from \emph{source} $i$ to \emph{destination} $\pi(i)$) so that $a_i$ is actually $a_{i \to \pi(i)}$, and by rearranging all entries by the $\pi(i)$'s following the arrow $\to$ in the subscripts and comparing the resulting tables with the original ones we are in effect checking whether the structure is preserved or altered under $\pi$. Likewise, in the second method, we think of $a_i$ as subscripted $a_{i \from \inv{\pi}(i)}$ (recall the inverse $\inv{\pi}$ of a permutation $\pi$ is also a permutation), and rearranging all entries by the $\inv{\pi}(i)$'s (in the usual order of $1, \etc, n$) and comparing the resultant tables with the original ones does the same job.
%
\item \header{Note on Lemma 4.3.1} This lemma gives us the intuitive ideas:
\begin{enumerate}[\rm(1)]
%%
\item The more rigid a structure $\strct{A}$ is, the more automorphisms it has.
%%
\item The higher proportion of rigid structures a class $H$ has (in the unlabeled sense), the larger factor $\lclass{n}(H)$ is to $\uclass{n}(H)$. (This factor ranges between $1$ and $n!$.)
%%
\end{enumerate}

In the proof for part (c), a better choice for the symbol denoting a nontrivial automorphism in this context is $\sigma : \strct{A} \isom \strct{A}$. Since
\[
\sigma = (\inv{\pi} \cmps \pi) \cmps \sigma = \inv{\pi} \cmps (\pi \cmps \sigma),
\]
we have by ($\ast$) that
\[
\strct{A}_\pi = \strct{A}_{\pi \cmps \sigma}
\]
(here $\pi \cmps \sigma$ takes the place of $\rho$). In fact, if we view two automorphisms $\pi, \rho$ as equivalent when $\strct{A}_\pi = \strct{A}_\rho$, then the above argument gives that every equivalence class has the same size and furthermore,
\[
(\text{number of structures isomorphic to \mathmode{\strct{A}}}) \times (\text{number of automorphisms of \mathmode{\strct{A}}}) = n!
\]
in which only structures with domain $\sete{1, \etc, n}$ are considered.

Finally, note that $\lclass{n}$ is not necessarily a multiple of $\uclass{n}$: Consider the class $H$ of digraphs, then we have $\lclass{2}(H) = 4$ and $\uclass{2}(H) = 3$.
%
\item \header{Note on Lemma 4.3.2} Consider the vocabulary $\tau = \sete{P_1, \etc, P_k}$ of unary relation symbols ($k \geq 1$) and the two $\tau$-structures $\strct{A}, \strct{B}$ with $A = B = \sete{1, \etc, 2^k}$ such that every subset $S_1 \intsc \etc \intsc S_k$ of $A$ contains exactly one element where $S_i = \intpr{P_i}{A}$ or $S_i = A \setminus \intpr{P_i}{A}$ and $\intpr{P_i}{B} = \emptyset$.

Let $H$ consist of structures that are isomorphic to $\strct{A}$ or $\strct{B}$. Then we have that
\begin{center}
$\lprob[2^k](\rigid \wrt H) = \frac{\lclass{2^k}(\rigid \intsc H)}{\lclass{2^k}(H)} = \frac{(2^k)!}{(2^k)! + 1}$, \ and $\uprob[2^k](\rigid \wrt H) = \frac{\uclass{2^k}(\rigid \intsc H)}{\uclass{2^k}(H)} = \frac{1}{2}$.
\end{center}

This example shows that for some $n$ (in this case $n = 2^k$) the labeled and unlabeled probabilities can differ greatly.
%
\item \header{Note on Theorem 4.3.4} As explained in the footnote, here
\[
\lprob(K \wrt H) = \uprob(K \wrt H)
\]
actually stands for
\[
\lim_{n \to \infty} \lprob[n](K \wrt H) = \lim_{n \to \infty} \uprob[n](K \wrt H),
\]
which means that either both sides converge to the same value or both diverge.

Below we justify that $\lprob(K \wrt H) = \lprob(K \wrt \rigid \intsc H)$ and $\uprob(K \wrt H) = \uprob(K \wrt \rigid \intsc H)$ given $\uprob(\rigid \wrt H) = 1$. Since
\[
\lim_{n \to \infty} \frac{\lclass{n}(\cmpl{\rigid} \intsc H)}{\lclass{n}(H)} = \lim_{n \to \infty} \frac{\lclass{n}(H)}{\lclass{n}(H)} - \lim_{n \to \infty} \frac{\lclass{n}(\rigid \intsc H)}{\lclass{n}(H)} = 1 - \lprob(\rigid \wrt H) = 1 - 1 = 0
\]
and $0 \leq \frac{\lclass{n}(K \intsc \cmpl{\rigid} \intsc H)}{\lclass{n}(H)} \leq \frac{\lclass{n}(\cmpl{\rigid} \intsc H)}{\lclass{n}(H)}$, we have $\lim_{n \to \infty} \frac{\lclass{n}(K \intsc \cmpl{\rigid} \intsc H)}{\lclass{n}(H)} = 0$ and hence
\[
\begin{array}{lll}
\lprob(K \wrt H) & = & \displaystyle \lim_{n \to \infty} \frac{\lclass{n}(K \intsc H)}{\lclass{n}(H)} \cr
\ & = & \displaystyle \lim_{n \to \infty} \frac{\lclass{n}(K \intsc \rigid \intsc H)}{\lclass{n}(H)} + \lim_{n \to \infty} \frac{\lclass{n}(K \intsc \cmpl{\rigid} \intsc H)}{\lclass{n}(H)} \cr
\ & = & \displaystyle \lim_{n \to \infty} \frac{\lclass{n}(K \intsc \rigid \intsc H)}{\lclass{n}(\rigid \intsc H)} \mul \lim_{n \to \infty} \frac{\lclass{n}(\rigid \intsc H)}{\lclass{n}(H)} + \lim_{n \to \infty} \frac{\lclass{n}(K \intsc \cmpl{\rigid} \intsc H)}{\lclass{n}(H)} \cr
\ & = & \lprob(K \wrt \rigid \intsc H) \mul \lprob(\rigid \wrt H) + 0 \cr
\ & = & \lprob(K \wrt \rigid \intsc H).
\end{array}
\]
Likewise for $\uprob(K \wrt H) = \uprob(K \wrt \rigid \intsc H)$.
%
\item \header{Note on the Proof of 4.3.7} By definition, there are three cases where a nontrivial parametric class $H$ is nonfree:
\begin{enumerate}[(1)]
%%
\item The underlying vocabulary $\tau$ is empty.
%%
\item The underlying vocabulary $\tau$ contains only unary relation symbols.
%%
\item The underlying vocabulary $\tau$ contains a nonunary relation symbol, and for every $m \geq 2$, every $r$-ary $R$ ($r \geq m$), and every surjection $i : \sete{1, \etc, r} \to \sete{1, \etc, m}$,
\begin{center}
either \ \ $\varphi_0 \consq \forall \distinct x_1 \etc x_m Rx_{i(1)} \etc x_{i(r)}$ \ \ or \ \ $\varphi_0 \consq \forall \distinct x_1 \etc x_m \neg Rx_{i(1)} \etc x_{i(r)}$.
\end{center}
(Since $\varphi_0$ is nontrivial parametric, it has a model of size $m$ and hence at least one of the sentences
\[
\varphi_0 \land \exists \distinct x_1 \etc x_m Rx_{i(1)} \etc x_{i(r)}
\]
and
\[
\varphi_0 \land \exists \distinct x_1 \etc x_m \neg Rx_{i(1)} \etc x_{i(r)}
\]
is satisfiable.)
%%
\end{enumerate}
Case (1) is obvious because the only parametric class is $\modclass(\tau)$ (for the parametric sentence that is the empty conjunction) and $\lclass{n}(\tau) = \uclass{n}(\tau) = 1$. Case (3) can be reduced to case (2) because the ``shape'' of the relationship among different elements of the universe is fixed by $\varphi_0$; thus, $\tau$-structures $\strct{A}$ of the same size can only differ from each other in the induced unary relations $\setm{a}{\intpr{R}{\strct{A}} a \etc a}$, making those induced unary relations all that is relevant in the counting (cf.\ the last paragraph of the proof). The proof mainly handles case (2).

On the other hand, the statement given in the parentheses that \emph{any boolean combination of formulas $R_i x$ can be written as a disjunction of formulas $R^\alpha x$} (essentially) follows from the theorem on disjunctive normal form for propositional logic.
%
\item \header{Solution to Exercise 4.3.9} For brevity, let
\[
\chi \defas \text{``\mathmode{P} is an ordering''}.
\]
Then $\psi = \chi \lor \neg\varphi$ and for structures of cardinality at least $2$ we have that $\chi$ logically implies $\varphi$. Hence, for structures $\strct{A}$ with $\card{A} \geq 2$ the sentences $\chi$ and $\varphi \land \psi$ are logically equivalent, and so are $\neg\varphi$ and $\neg\varphi \land \psi$; in other words, models of $\psi$ of size at least $2$ consist of two disjoint groups of ($\sigma$- or $\tau$-) structures that satisfy either $\chi$ or $\neg\varphi$.

Let $n \geq 2$ and consider the $\sigma$- and $\tau$-structures $\strct{A}$ that satisfy $\psi$.
\begin{enumerate}[(1)]
%%
\item $\strct{A} \satis \chi$: There are $n!$ such $\sigma$-structures $\strct{A}$, all of which are isomorphic to one another. This gives $\lclass{n}^\sigma(\chi) = n!$ and $\uclass{n}^\sigma(\chi) = 1$. Also, there are $n! \mul 2^{n^2}$ such $\tau$-structures $\strct{A}$, and there are $2^{n^2}$ isomorphism types among them (fixing an ordering, there are two choices for each of the $n^2$ pairs of (ordered) elements in the universe regarding the interpretation of $R$). Thus, $\lclass{n}^\tau(\chi) = n! \mul 2^{n^2}$ and $\uclass{n}^\tau(\chi) = 2^{n^2}$.
%%
\item $\strct{A} \satis \neg\varphi$: There is only one such $\sigma$-structure $\strct{A}$, so $\lclass{n}^\sigma(\neg\varphi) = \uclass{n}^\sigma(\neg\varphi) = 1$. On the other hand, there are $2^{n^2}$ such $\tau$-structures $\strct{A}$, therefore $\lclass{n}^\tau(\neg\varphi) = 2^{n^2}$; also note that $\neg\varphi$ is (logically equivalent to) a nontrivial free parametric sentence in $\folog\of{\tau}$ since there is a real choice for every pair of distinct elements in the universe concerning the interpretation of $R$, thus, by 4.3.5 and 4.3.3 we have
\[
\lim_{n \to \infty} \frac{\uclass{n}^\tau(\neg\varphi) \mul n!}{\lclass{n}^\tau(\neg\varphi)} = 1.
\]

It follows that
\[
\lprob^\sigma(\varphi \wrt \psi) = \lim_{n \to \infty} \frac{\lclass{n}^\sigma(\chi)}{\lclass{n}^\sigma(\chi) + \lclass{n}^\sigma(\neg\varphi)} = 1,
\]
\[
\uprob^\sigma(\varphi \wrt \psi) = \lim_{n \to \infty} \frac{\uclass{n}^\sigma(\chi)}{\uclass{n}^\sigma(\chi) + \uclass{n}^\sigma(\neg\varphi)} = \frac{1}{2},
\]
\[
\lprob^\tau(\varphi \wrt \psi) = \lim_{n \to \infty} \frac{\lclass{n}^\tau(\chi)}{\lclass{n}^\tau(\chi) + \lclass{n}^\tau(\neg\varphi)} = 1
\]
and with
\[
\frac{\uclass{n}^\tau(\chi)}{\uclass{n}^\tau(\chi) + \uclass{n}^\tau(\neg\varphi)} = \frac{\uclass{n}^\tau(\chi)}{\uclass{n}^\tau(\chi) + \frac{\lclass{n}^\tau(\neg\varphi)}{n!} \mul \frac{\uclass{n}^\tau(\neg\varphi) \mul n!}{\lclass{n}^\tau(\neg\varphi)}},
\]
that
\[
\uprob^\tau(\varphi \wrt \psi) = \lim_{n \to \infty} \frac{\uclass{n}^\tau(\chi)}{\uclass{n}^\tau(\chi) + \uclass{n}^\tau(\neg\varphi)} = 1.
\]
%%
\end{enumerate}
%
\end{enumerate}
%end of section 3-----------------------------------------------------------------------------


%section 5------------------------------------------------------------------------------------
\setcounter{section}{4}
\section{Probabilities of Monadic Second Order Properties}
\begin{enumerate}[1.]
%
\item \header{Note on the Proof of Lemma 4.5.3} From the proof of Claim 1, it looks like either $\psi^Y_<(x, y)$, $\psi^Z_<(x, y)$ and $\psi^U_<(x, y)$ mean $y <^Y x$, $y <^Z x$ and $y <^U x$, respectively or the statement on the right-hand side of ($\ast$) should be $a \geq b$.

There is a typo on line 4 of page 92: ``$i \in \sete{1, \etc, n}$'' should be ``$i \in \sete{1, \etc, t}$''. In fact, the probability $q$ that a given $i \in \sete{1, \etc, t}$ satisfies ($\ast$) is $p^{\frac{1}{2}r(r + 1)}(1 - p)^{\frac{1}{2}r(r - 1)}$.
%
\end{enumerate}
%end of section 5-----------------------------------------------------------------------------


