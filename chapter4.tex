\setcounter{chapter}{3}
\chapter{0-1 Laws}
%section 1------------------------------------------------------------------------------------
\begin{enumerate}[1.]
%
\item \header{Note on the Proof of Lemma 4.1.2} Denote
\[
\psi \defas \blor_{\varphi \in \Phi} \neg\varphi \lor \blor_{\varphi \in \cmpl{\Phi}} \varphi
\]
and let $\strct{A}$ with domain $A = \sete{1, \etc, n}$ be a random structure. Then
\[
\begin{array}{ll}
\    & \lprob[n](\neg\extaxm[\Phi]) \cr
=    & \paren{\mbox{the probability that \mathmode{\strct{A} \satis \neg\extaxm[\Phi]}}} \cr
=    & \paren{\parbox{40em}{the probability that there is an injective \mathmode{f : \sete{1, \etc, r} \to A} such that for every \mathmode{a \in A \setminus \rg(f)}, \mathmode{\strct{A} \satis \psi[f(1), \etc, f(r), a]}}} \cr
\leq & \sum\limits_{\text{injective \mathmode{f : \sete{1, \etc, r} \to A}}} \paren{\mbox{the probability that for every \mathmode{a \in A \setminus \rg(f)}, \mathmode{\strct{A} \satis \psi[f(1), \etc, f(r), a]}}} \cr
=    & \prmt{n}{r} \mul \paren{\mbox{the probability that for every \mathmode{a \in A \setminus \rg(f)} given injective \mathmode{f}, \mathmode{\strct{A} \satis \psi[f(1), \etc, f(r), a]}}} \cr
=    & \prmt{n}{r} \mul \paren{\parbox{35em}{the probability that for every \mathmode{a \in A \setminus \rg(f)} given injective \mathmode{f}, the assignment \mathmode{f(1), \etc, f(r), a} does not satisfy in \mathmode{\strct{A}} the type characterized by \mathmode{\Phi}}} \cr
=    & \prmt{n}{r} \mul \prod\limits_{\text{\mathmode{a \in A \setminus \rg(f)} given injective \mathmode{f}}} \paren{\parbox{25em}{the probability that the assignment \mathmode{f(1), \etc, f(r), a} does not satisfy in \mathmode{\strct{A}} the type characterized by \mathmode{\Phi}}} \cr
=    & \prmt{n}{r} \mul (\frac{c - 1}{c})^{n - r} \cr
\leq & n^r \mul (\frac{c - 1}{c})^{n - r}. \cr
\end{array}
\]

\begin{note}
The proof yields that for sufficiently large $n$, every extension axiom $\extaxm$ has a model of cardinality $n$.
\end{note}
%
\item \header{Hint to Exercise 4.1.6} By 2.2.6, the set
\[
\Phi \defas \sett{\hint{m}{\strct{C}}}{\mathmode{\strct{C}} is a structure}
\]
is finite. Thus, for $s \geq 1$, the binary relation $\isom_m$ induces a finite partition of $\lclass{s}(\tau)$ due to the equivalence between \refitem{(iii)} and \refitem{(iv)} of 2.3.4. Also by 4.1.5 the 0-1 law of $\folog\of{\tau}$, there is exactly one sentence $\varphi_0 \in \Phi$ with $\lprob(\varphi_0) = 1$ because
\[
1 = \lprob(\bunion_{\varphi \in \Phi} \modclass(\varphi)) = \sum_{\varphi \in \Phi} \lprob(\varphi).
\]
Finally, observe that the probability $\strct{A} \isom_m \strct{B}$ is $\geq$ the probability that both $\strct{A} \satis \varphi_0$ and $\strct{B} \satis \varphi_0$.
%
\item \header{Solution to Exercise 4.1.7} Let $\varphi \defas \extaxm[\Phi]$ be an $(r + 1)$-extension axiom, where $\Phi$ is a subset of $\Delta_{r + 1}$ as defined in 3.2.11. Assume that $\card{\Delta_{r + 1}} = c$ and $\card{\Phi} = k$.

Let $\strct{A}$ with domain $A = \sete{1, \etc, n}$ be a random structure constructed with a biased coin so that $R i_1 \etc i_m$ holds with probability $p$ where $0 < p < 1$. Then
\[
\begin{array}{ll}
\    & \lprob[n](\neg\extaxm[\Phi]) \cr
=    & \paren{\mbox{the probability that \mathmode{\strct{A} \satis \neg\extaxm[\Phi]}}} \cr
=    & \paren{\parbox{40em}{the probability that there is an injective \mathmode{f : \sete{1, \etc, r} \to A} such that for every \mathmode{a \in A \setminus \rg(f)}, \mathmode{\strct{A} \satis \psi[f(1), \etc, f(r), a]}}} \cr
\leq & \sum\limits_{\text{injective \mathmode{f : \sete{1, \etc, r} \to A}}} \paren{\mbox{the probability that for every \mathmode{a \in A \setminus \rg(f)}, \mathmode{\strct{A} \satis \psi[f(1), \etc, f(r), a]}}} \cr
=    & \prmt{n}{r} \mul \paren{\mbox{the probability that for every \mathmode{a \in A \setminus \rg(f)} given injective \mathmode{f}, \mathmode{\strct{A} \satis \psi[f(1), \etc, f(r), a]}}} \cr
=    & \prmt{n}{r} \mul \paren{\parbox{35em}{the probability that for every \mathmode{a \in A \setminus \rg(f)} given injective \mathmode{f}, the assignment \mathmode{f(1), \etc, f(r), a} does not satisfy in \mathmode{\strct{A}} the type characterized by \mathmode{\Phi}}} \cr
=    & \prmt{n}{r} \mul \prod\limits_{\text{\mathmode{a \in A \setminus \rg(f)} given injective \mathmode{f}}} \paren{\parbox{25em}{the probability that the assignment \mathmode{f(1), \etc, f(r), a} does not satisfy in \mathmode{\strct{A}} the type characterized by \mathmode{\Phi}}} \cr
=    & \prmt{n}{r} \mul (1 - p^k(1 - p)^{c - k})^{n - r} \cr
\leq & n^r \mul (1 - p^k(1 - p)^{c - k})^{n - r}. \cr
\end{array}
\]
It follows that $\lprob(\neg\extaxm[\Phi]) = \lim_{n \to \infty} \lprob[n](\neg\extaxm[\Phi]) = 0$.
%
\item \header{Solution to Exercise 4.1.8} Let $\strct{R}'$ denote the random structure defined as in the description of the exercise. Note that $\strct{R}'$ is a \emph{random variable}. In the following for $n > 0$ and for any (finite or infinite) structure $\strct{A}$ we let $\strct{A}_n$ be the substructure of $\strct{A}$ induced by the domain $\sete{1, \etc, n}$, provided that the domain $A$ of $\strct{A}$ contains $\sete{1, \etc, n}$ as a subset.

Observe that there are finitely many $\tau$-structures with domain $\sete{1, \etc, n}$, i.e.\ the class $\lclass{n}(\tau)$ is finite. Since $\tau$ is relational, the structures $\strct{B} \in \lclass{n}(\tau)$ altogether induce an \emph{equal partition} of
\[
C \defas \sett{\strct{A}}{\mathmode{\strct{A}} is a \mathmode{\tau}-structure of domain \mathmode{A = \sete{1, 2, \etc}}}
\]
such that the equivalence classes
\[
\setm{\strct{A} \in C}{\strct{A}_n = \strct{B}}
\]
for the structures $\strct{B}$ have the same size. Thus, if $K$ is a class of (finite) $\tau$-structures, then
\begin{equation}\label{e4_1_8+1}
(\text{the probability that for the random structure \mathmode{\strct{R}'}, its substructure \mathmode{\strct{R}'_n} is in \mathmode{K}}) = \lprob[n](K). \tag{$+$}
\end{equation}

Now consider any $(r + 1)$-extension axiom $\chi$ so that $\neg\chi$ is logically equivalent to
\[
\exists v_1 \etc \exists v_r \rho,
\]
where
\[
\rho = (\bland_{1 \leq i < j \leq r} \neg v_i = v_j \land \forall v_{r + 1} (\bland_{1 \leq i \leq r} \neg v_{r + 1} = v_i \lthen (\blor_{\varphi \in \Phi} \neg\varphi \lor \blor_{\varphi \in \cmpl{\Phi}} \varphi)))
\]
and $\Phi \subseteq \Delta_{r + 1}$. For every $r$-tuple $\vect{i} = (i_1, \etc, i_r) \in \cartpwr{\posint}{r}$ of positive integers, let
\[
m(\vect{i}) \defas
\begin{cases}
\max(i_1, \etc, i_r) & \text{if \mathmode{r > 0}} \cr
1                    & \text{otherwise (i.e.\ \mathmode{\vect{i} = \emptyseq})} \cr
\end{cases}
\]
and further for every positive integer $j \in \posint$ let $E^{\vect{i}}_j$ be the event that $\strct{R}'_{m(\vect{i}) + j} \satis \rho[\vect{i}]$. Then we have
\[
E^{\vect{i}}_1 \supseteq E^{\vect{i}}_2 \supseteq \etc
\]
and hence
\begin{equation}\label{e4_1_8+2}
(\text{the probability for the event \mathmode{\bintsc^\infty_{j = 1} E^{\vect{i}}_j}}) = \lim_{j \to \infty} (\text{the probability for the event \mathmode{E^{\vect{i}}_j}}). \tag{$\ast$}
\end{equation}
Moreover, it is true that
\[
\begin{array}{lll}
\    & (\text{the probability for the event \mathmode{E^{\vect{i}}_j}}) & \cr
\leq & (\text{the probability for the event that \mathmode{\strct{R}'_{m(\vect{i}) + j} \satis \exists v_1 \etc \exists v_r \rho}}) & \cr
=    & (\text{the probability for the event that \mathmode{\strct{R}'_{m(\vect{i}) + j} \satis \neg\chi}}) & \cr
=    & \lprob[m(\vect{i}) + j](\neg\chi) & \text{(by (\ref{e4_1_8+1}))} \cr
\end{array} 
\]
and hence
\begin{equation}\label{e4_1_8+3}
\lim_{j \to \infty} (\text{the probability for the event \mathmode{E^{\vect{i}}_j}}) \leq \lim_{j \to \infty} \lprob[m(\vect{i}) + j](\neg\chi) = 0 \tag{$\ast\ast$}
\end{equation}
by (the proof of) Lemma 4.1.2.

Finally, for brevity, for every $\vect{i} \in \cartpwr{\posint}{r}$ let $F^{\vect{i}}$ be the event that $\strct{R}' \satis \rho[\vect{i}]$; then we have
\begin{equation}\label{e4_1_8+4}
F^{\vect{i}} = \bintsc^\infty_{j = 1} E^{\vect{i}}_j. \tag{$\ast\ast\ast$}
\end{equation}
It follows that
\[
\begin{array}{lll}
\    & (\text{the probability that \mathmode{\strct{R}' \satis \neg\chi}}) & \cr
=    & (\text{the probability for the event \mathmode{\bunion_{\vect{i} \in \cartpwr{\posint}{r}} F^{\vect{i}}}}) & \cr
\leq & \sum_{\vect{i} \in \cartpwr{\posint}{r}} (\text{the probability for the event \mathmode{F^{\vect{i}}}}) & \cr
=    & \sum_{\vect{i} \in \cartpwr{\posint}{r}} (\text{the probability for the event \mathmode{\bintsc^\infty_{j = 1} E^{\vect{i}}_j}}) & \text{(by (\ref{e4_1_8+4}))} \cr
=    & \sum_{\vect{i} \in \cartpwr{\posint}{r}} \lim_{j \to \infty} (\text{the probability for the event \mathmode{E^{\vect{i}}_j}}) & \text{(by (\ref{e4_1_8+2}))} \cr
\leq & \sum_{\vect{i} \in \cartpwr{\posint}{r}} 0 & \text{(by (\ref{e4_1_8+3}))} \cr
=    & 0.
\end{array}
\]

Therefore, we conclude that, with probability $1$, $\strct{R}'$ is a model of any extension axiom $\chi$ and hence of $\randstrtheory$.

\begin{note}
The \emph{values} of the random variable $\strct{R}'$ for which $\strct{R}'$ is a model of $\randstrtheory$ are exactly those $\tau$-structures that are isomorphic to the infinite random structure $\infrandstr$.
\end{note}
%
\item \header{Hint to Exercise 4.1.9} (INCOMPLETE)
%
\end{enumerate}
%end of section 1-----------------------------------------------------------------------------


%section 2------------------------------------------------------------------------------------
\setcounter{section}{1}
\section{Parametric Classes}
\begin{enumerate}[1.]
%
\item \header{Note on Definition 4.2.1 and the Arguments Leading to Theorem 4.2.3} A parametric sentence may be a conjunction of sentences that involve different numbers of variables, in which the boolean combinations may contain different relation symbols. For example,
\[
\forall x Rxx \land \forall \distinct x y (\neg Rxy \lor Tyxy)
\]
is a parametric sentence.

In the construction process leading to statement (1) before 4.2.3, notice that whether or not an $s$-tuple $b_1, \etc, b_s$ is in a relation $\intpr{R}{B}$ is independent of other tuples (not necessarily having length $s$) due to the fact that every atomic subformula of $\varphi_0$ contains exactly the variables that appear in its corresponding quantification and that every conjunct of $\varphi_0$ is a universal formula. This explains why the process works for parametric classes and why it may not work for classes of transitive properties (hence those properties are excluded in the consideration of parametric classes).

To obtain (2), let $\strct{A}, \strct{B}$ be two models of $\randstrtheory(\varphi_0)$ and choose $I$ as in 3.2.11. Obviously $I \neq \emptyset$ as $\emptymap \mapsto \emptymap \in I$ since $\strct{A} \satis \tr \land \neg\fls$ and $\strct{B} \satis \tr \land \neg\fls$. For the forth property, let $\vect{a} \mapsto \vect{b} \in I$ and $\vect{a} = a_1, \etc, a_r$ and $\vect{b} = b_1, \etc, b_r$ each consist of distinct entries. Let $a_{r + 1} \in A$ be different from entries of $\vect{a}$ and consider $\Phi \subseteq \Delta_{r + 1}$ such that
\[
\strct{A} \satis (\bland_{\varphi \in \Phi} \varphi \land \bland_{\varphi \in \cmpl{\Phi}} \neg\varphi)\withassgn{\vect{a}a_{r + 1}}.
\]
It follows that $\strct{A} \satis \exists \distinct v_1 \etc v_rv_{r + 1} (\bland_{\varphi \in \Phi} \varphi \land \bland_{\varphi \in \cmpl{\Phi}} \neg\varphi)$ and hence $\extaxm[\Phi]$ is compatible with $\varphi_0$, which gives $\extaxm[\Phi] \in \randstrtheory(\varphi_0)$. As $\strct{B} \satis \randstrtheory(\varphi_0)$, there is a $b_{r + 1} \in B$ different from the entries of $\vect{b}$ such that
\[
\strct{B} \satis (\bland_{\varphi \in \Phi} \varphi \land \bland_{\varphi \in \cmpl{\Phi}} \neg\varphi)\withassgn{\vect{b}b_{r + 1}}.
\]
Therefore, $\vect{a}a_{r + 1} \mapsto \vect{b}b_{r + 1} \in I$. Similarly for the back property.

As for (3), a slight modification can be made to the construction procedure for the countable model of $\randstrtheory$ in 3.2.11 to obtain one for $\randstrtheory(\varphi_0)$: Let $\seq{\alpha_n}{n \geq 0}$ be as in 3.2.11 except that now we only consider extension axioms $\extaxm \in \randstrtheory(\varphi_0)$. We choose $\strct{A}_0$ with $A_0 = \sete{0}$ so that $\strct{A}_0 \satis \varphi_0$ according to (1). Suppose that $\strct{A}_n$ has been defined such that $\strct{A}_n \satis \varphi_0$. For $\alpha_n = (\vect{m}, \extaxm[\Phi])$ where $\vect{m} = m_1, \etc, m_r$ that are distinct elements not greater than $n$ (if $r = 0$ then $\vect{m} = \emptyseq$) and $\Phi \subseteq \Delta_{r + 1}$, we show how to construct a model $\strct{A}_{n + 1}$ of $\varphi_0$ so that $(\strct{A}_{n + 1}, m_1, \etc, m_r, n + 1) \satis \Phi$:
\begin{itemize}
%%
\item Let, as in 3.2.11,
\begin{center}
$\strct{A}_{n + 1} \satis \varphi \withassgn{m_1, \etc, m_r, n + 1}$ \ \ \ iff \ \ \ $\varphi \in \Phi$.
\end{center}
%%
\item In case $n > r$ and $k \geq 2$, for every $2 \leq s \leq k$ and for every $s$-tuple $\vect{m}'$ that contains $n + 1$ and an entry $\leq n$ not in $\vect{m}$, we apply the construction process for (1) to $\vect{m}'$.
%%
\end{itemize}
Note that the second step is independent of $\Phi$, and thus in order to verify $\strct{A}_{n + 1} \satis \varphi_0$, it remains to show that for every conjunct
\[
\forall \distinct v_1 \etc v_t \psi
\]
of $\varphi_0$ and every $t$-tuple $\vect{a} = a_1, \etc, a_t$ (not necessarily distinct) that contains $n + 1$ and has all its other entries (if any) from $\vect{m}$, we have $\strct{A}_{n + 1} \satis \psi \withassgn{\vect{a}}$. In fact, letting $\psi'$ be obtained from $\psi$ by changing $v_i$ ($1 \leq i \leq t$) to $v_j$ ($1 \leq j \leq r$) if $a_i = m_j$ and to $v_{r + 1}$ if $a_i = n + 1$, we have that $\psi'$ is a conjunction of some formulas in $\Delta_{r + 1}$ and
\begin{center}
$\strct{A}_{n + 1} \satis \psi \withassgn{\vect{a}}$ \ \ \ iff \ \ \ $\strct{A}_{n + 1} \satis \psi' \withassgn{\vect{m}, n + 1}$.
\end{center}
As $\extaxm[\Phi]$ is compatible with $\varphi_0$, there is a model $\strct{B}$ of
\[
\varphi_0 \land \exists \distinct v_1 \etc v_r v_{r + 1} (\bland_{\varphi \in \Phi} \varphi \land \bland_{\varphi \in \cmpl{\Phi}} \neg\varphi).
\]
Consider an $(r + 1)$-tuple $\vect{b} = b_1, \etc, b_{r + 1}$ of distinct elements such that
\[
\strct{B} \satis (\bland_{\varphi \in \Phi} \varphi \land \bland_{\varphi \in \cmpl{\Phi}} \neg\varphi) \withassgn{\vect{b}},
\]
then
\begin{center}
$\strct{A}_{n + 1} \satis \psi' \withassgn{\vect{m}, n + 1}$ \ \ \ iff \ \ \ $\strct{B} \satis \psi' \withassgn{\vect{b}}$
\end{center}
(recall $\psi'$ is a conjunction of some formulas in $\Delta_{r + 1}$). But it is true that $\strct{B} \satis \psi' \withassgn{\vect{b}}$ because $\strct{B}$ is a model of $\varphi_0$. We conclude that $\strct{A}_{n + 1} \satis \psi \withassgn{\vect{a}}$.

On the other hand, for every $r \geq 0$ the theory $\randstrtheory(\varphi_0)$ contains at least one $(r + 1)$-extension axiom: By (1) there is a model $\strct{A}$ of $\varphi_0$ of cardinality $r + 1$, say, having domain $A = \sete{a_1, \etc, a_{r + 1}}$. Let $\Phi \subseteq \Delta_{r + 1}$ such that
\[
\strct{A} \satis (\bland_{\varphi \in \Phi} \varphi \land \bland_{\varphi \in \cmpl{\Phi}} \neg\varphi) \withassgn{a_1, \etc, a_{r + 1}}.
\]
We then have $\strct{A} \satis \exists \distinct v_1 \etc v_{r + 1} (\bland_{\varphi \in \Phi} \varphi \land \bland_{\varphi \in \cmpl{\Phi}} \neg\varphi)$ and hence the $(r + 1)$-extension axiom $\extaxm[\Phi]$ is compatible with $\varphi_0$ and is in $\randstrtheory(\varphi_0)$.

The above argument also yields that for every $s \geq 1$ and every $r < s$, $\conjextaxm[\varphi_0]{s}$ contains at least one $(r + 1)$-extension axiom as a conjunct.

Statement (3) immediately implies that for $s \geq 1$, $\conjextaxm[\varphi_0]{s}$ is satisfiable by a model of $\varphi_0$, because $\randstrtheory(\varphi_0) \consq \conjextaxm[\varphi_0]{s}$.

As in 3.3.11, we can conclude that
\begin{itemize}
%%
\item Every model of $\conjextaxm[\varphi_0]{s}$ has at least $s$ elements (by induction on $s$, using the fact that $\conjextaxm[\varphi_0]{s + 1}$ is the conjunction of $\conjextaxm[\varphi_0]{s}$ and at least one $(s + 1)$-extension axiom).
%%
\item Every two models of $\conjextaxm[\varphi_0]{s}$ are $s$-partially isomorphic (argue as for (2) above and as in 3.3.11 simultaneously), from which we obtain (4).
%%
\end{itemize}

Finally, let $A$ be a set such that $\card{A} = n \geq r + 1$ and let $\Phi \subseteq \Delta_{r + 1}$ such that $\extaxm[\Phi]$ is compatible with $\varphi_0$, we show how to construct a model $\strct{A}$ of $\varphi_0$ with domain $A$ such that $(\strct{A}, a_1 \etc a_ra) \satis \Phi$ in which $a_1, \etc, a_r, a$ are all distinct.\footnote{I suspect that there is a typo in the parenthesized argument after (5).} The construction consists of two steps:
\begin{itemize}
%%
\item For every $0 \leq m \leq r$ and $(m + 1)$-tuple $\vect{a} = a_{i_1} \etc a_{i_m}a$ with $1 \leq i_1 < i_2 < \etc < i_m \leq r$ (if $m = 0$ then $\vect{a} = a$) and $\varphi(v_{i_1}, \etc, v_{i_m}, v_{r + 1}) = Ry_1 \etc y_n$ with $\sete{y_1, \etc, y_n} = \sete{v_{i_1}, \etc, v_{i_m}, v_{r + 1}}$, let
\begin{center}
$\strct{A} \satis \varphi \withassgn{\vect{a}}$ \ \ \ iff \ \ \ $\varphi \in \Phi$.
\end{center}
%%
\item For all other tuples $\vect{a}'$ (which may or may not contain $a$ and is not a permutation of those $\vect{a}$ considered above) and all $R \in \tau$ we use the construction procedure leading to (1) for the $\vect{a}$-part of $\intpr{R}{A}$.
%%
\end{itemize}
It is easy to show that $\strct{A} \satis \varphi_0$ using the same argumentation as for (3) and thus omitted. Also observe that the second step is independent of $\Phi$, so we can focus on $\Phi$ when proving (5) using the same method as for 4.1.2.
%
\end{enumerate}
%end of section 2-----------------------------------------------------------------------------


%section 5------------------------------------------------------------------------------------
\setcounter{section}{4}
\section{Probabilities of Monadic Second Order Properties}
\begin{enumerate}[1.]
%
\item \header{Note on the Proof of Lemma 4.5.3} From the proof of Claim 1, it looks like either $\psi^Y_<(x, y)$, $\psi^Z_<(x, y)$ and $\psi^U_<(x, y)$ mean $y <^Y x$, $y <^Z x$ and $y <^U x$, respectively or the statement on the right-hand side of ($\ast$) should be $a \geq b$.

There is a typo on line 4 of page 92: ``$i \in \sete{1, \etc, n}$'' should be ``$i \in \sete{1, \etc, t}$''. In fact, the probability $q$ that a given $i \in \sete{1, \etc, t}$ satisfies ($\ast$) is $p^{\frac{1}{2}r(r + 1)}(1 - p)^{\frac{1}{2}r(r - 1)}$.
%
\end{enumerate}
%end of section 5-----------------------------------------------------------------------------


